<!doctype html>
<html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>SLNS Dashboard</title><link rel="stylesheet" href="/style.css"></head>
<body>
<header style="padding:12px 20px;display:flex;justify-content:space-between;align-items:center;background:#0f1215;color:#caa164">
  <div>SLNS Admin Panel</div><div><button id="logout" style="background:#caa164;border:none;padding:8px;border-radius:8px">Logout</button></div>
</header>
<main style="padding:20px">
  <section id="stats" style="display:flex;gap:12px;flex-wrap:wrap"></section>
  <section style="margin-top:20px">
    <h3 style="color:#caa164">Recent Uploads</h3>
    <div id="recent"></div>
  </section>
  <section style="margin-top:20px">
    <a href="/dashboard/upload.html" style="background:#caa164;color:#081126;padding:10px;border-radius:8px;text-decoration:none">Upload New Items</a>
  </section>
</main>
<script>
if(sessionStorage.getItem('slns_admin')!=='true'){ window.location.href='/dashboard/'; }
document.getElementById('logout').addEventListener('click', ()=>{ sessionStorage.removeItem('slns_admin'); window.location.href='/dashboard/'; });

async function loadRecent(){
  try{
    const resp = await fetch('/items.json');
    if(!resp.ok) throw 'no items';
    const items = await resp.json();
    const total = items.length;
    const totalW = items.reduce((s,i)=>s + (parseFloat(i.weight)||0),0);
    document.getElementById('stats').innerHTML = `<div style="background:#0b0c0e;padding:12px;border-radius:8px;min-width:180px"><div style="color:#9fb0bd">Total Items</div><div style="font-size:20px;color:#caa164">${total}</div></div><div style="background:#0b0c0e;padding:12px;border-radius:8px;min-width:220px"><div style="color:#9fb0bd">Total Gold Weight</div><div style="font-size:20px;color:#caa164">${totalW.toFixed(3)} g</div></div>`;
    const recent = items.slice(-6).reverse();
    document.getElementById('recent').innerHTML = recent.map(it=>`<div style="padding:8px;background:#0f1418;margin:6px;border-radius:8px"><strong style="color:#caa164">${it.name}</strong> â€” ${it.weight} g</div>`).join('');
  }catch(e){
    document.getElementById('stats').innerHTML = '<div style="color:#9fb0bd">No items.json found. Upload items to create it.</div>';
  }
}
loadRecent();
</script>
</body></html>
